<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Watch Ads - Unlock Video</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #121212, #232323);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    h2 { text-align:center; color:#00ff88; }
    .btn {
      background:#00ff88; color:#000; font-weight:bold; border:none;
      padding:1rem 2rem; border-radius:10px; margin:10px; cursor:pointer;
      width:90%; max-width:400px; transition:all 0.3s;
    }
    .btn:hover { transform:scale(1.05); background:#00cc70; }
    .share-btn { background:#007bff; color:#fff; }
    .join-btn { background:#ff4444; color:#fff; }
    .ad-container {
      text-align:center; width:100%; max-width:900px; margin-top:15px;
    }
    .ad-image {
      width:100%; border-radius:12px; border:2px solid #00ff88;
      box-shadow:0 0 15px rgba(0,255,136,0.3);
    }
    .info { text-align:center; margin-top:15px; color:#ccc; }
    .countdown { color:#00ff88; }
    .player-wrap {
      display:none; width:100%; max-width:900px; margin-top:20px;
    }
    .player-iframe {
      width:100%; height:480px; border:0; border-radius:10px;
      box-shadow:0 10px 30px rgba(0,0,0,0.6);
    }
    @media (max-width:600px){ .player-iframe{ height:300px; } }
    .redirect-link {
      display:none; margin-top:20px; background:#007bff; color:#fff;
      padding:0.8rem 1.5rem; border-radius:10px; text-decoration:none;
      font-weight:bold; box-shadow:0 0 10px rgba(0,123,255,0.5);
    }
    .redirect-link:hover { background:#0056b3; }
  </style>
</head>
<body>
  <button class="btn share-btn" id="shareBtn">Share with Your Friends</button>
  <button class="btn join-btn" id="joinBtn">Join Official Channel</button>

  <div class="ad-container">
    <h2>Watch 5 Ads to Unlock Full Video</h2>
    <img src="https://via.placeholder.com/900x300" alt="Ad Banner" class="ad-image" />
  </div>

  <button class="btn" id="watchAd">Watch Ad</button>

  <div class="info">
    <p>Ads watched: <span id="watchedCount">0</span>/5</p>
    <p class="countdown" id="countdown">Click ‚ÄúWatch Ad‚Äù to start!</p>
  </div>

  <div class="player-wrap" id="playerWrap">
    <h2>Your Video</h2>
  </div>

  <a href="https://t.me/+bKHfwO7GUUwxZTA1" target="_blank" class="redirect-link" id="redirectLink">Join Official Channel üöÄ</a>

  <!-- Monetag SDK -->
  <script src="//libtl.com/sdk.js" data-zone="9903296" data-sdk="show_9903296"></script>

  <script>
    const DRIVE_PREVIEW_URL = "https://drive.google.com/uc?export=preview&id=13LwO98gbJTKXMQzTUPiY1gkUNGa2C2_n";
    const totalAdsRequired = 5;
    let adsWatched = parseInt(localStorage.getItem("adsWatched") || "0");
    let isLocked = false, timer;

    const watchAdBtn = document.getElementById("watchAd");
    const watchedCount = document.getElementById("watchedCount");
    const countdown = document.getElementById("countdown");
    const playerWrap = document.getElementById("playerWrap");
    const redirectLink = document.getElementById("redirectLink");

    watchedCount.textContent = adsWatched;

    function showVideo(){
      if(playerWrap.style.display === "block") return;
      const iframe = document.createElement("iframe");
      iframe.src = DRIVE_PREVIEW_URL;
      iframe.className = "player-iframe";
      iframe.allow = "autoplay; encrypted-media; fullscreen";
      iframe.setAttribute("allowfullscreen","");
      playerWrap.appendChild(iframe);
      playerWrap.style.display = "block";
      redirectLink.style.display = "inline-block";
      iframe.scrollIntoView({behavior:"smooth"});
    }

    function startCooldown(){
      let sec = 2;
      isLocked = true;
      watchAdBtn.disabled = true;
      countdown.textContent = `Next ad in ${sec}s...`;
      timer = setInterval(()=>{
        sec--;
        countdown.textContent = sec>0 ? `Next ad in ${sec}s...` : "Click to watch next ad!";
        if(sec<=0){ clearInterval(timer); isLocked=false; watchAdBtn.disabled=false; }
      },1000);
    }

    function reward(){
      adsWatched++;
      localStorage.setItem("adsWatched", adsWatched);
      watchedCount.textContent = adsWatched;
      if(adsWatched >= totalAdsRequired){
        alert("üéâ You‚Äôve unlocked the video!");
        localStorage.setItem("adsWatched","0");
        showVideo();
      } else {
        alert(`Ad ${adsWatched}/5 watched. Keep going!`);
        startCooldown();
      }
    }

    watchAdBtn.onclick = ()=>{
      if(isLocked) return;
      show_9903296().then(reward).catch(()=>{
        alert("Ad failed to load. Try again!");
        isLocked=false;
        watchAdBtn.disabled=false;
      });
    };

    document.getElementById("shareBtn").onclick = ()=>{
      const link = "http://t.me/BUGminerbot";
      navigator.clipboard.writeText(link).then(()=>alert("Referral link copied!"));
    };

    document.getElementById("joinBtn").onclick = ()=>window.open("https://t.me/+bKHfwO7GUUwxZTA1","_blank");

    if(adsWatched >= totalAdsRequired) showVideo();
  </script>
</body>
</html>
